<!DOCTYPE idea-plugin PUBLIC "Plugin/DTD" "http://plugins.intellij.net/plugin.dtd">
<idea-plugin version="2" url="https://github.com/deepsky/SQL-Code-Assistant-/wiki">
    <name>SQL Code Assistant</name>
    <id>SQL</id>
    <description><![CDATA[
    <html>
    SQL Code Assistant provides extended editing capability for SQL and PL/SQL code of the Oracle database.<br>
    With the SQL Code Assistant you are able to browse the objects, edit and execute SQL statements, navigate
    over the code, search for usages in the database schema or scripts on the File System.<br><br>

    The plugin uses lexer and parser generated by ANTLR tool, thanks to Terence Parr (parrt@cs.usfca.edu, parrt@antlr.org).
    <br><br>
    Feature list:
    <ul>
        <li>Configurable syntax and error highlighting</li>
        <li>Static code analysis</li>
        <li>Context aware code completion</li>
        <li>Viewing the structure of SQL and PL/SQL code</li>
        <li>SQL and PL/SQL code formatting (experimental) <b>(Ctrl-Alt-L)</b></li>
        <li>Code Navigation</li>
        <li>Quick object lookup <b>(Ctrl-Shift-O)</b></li>
        <li>Explain Plan <b>(Ctrl-Shift-P)</b></li>
        <li>Find Usages tables, views, columns, function, procedures, etc</li>
        <li>Run SQL statement or PL/SQL block against active connection <b>(Ctrl-Shift-M)</b></li>
        <li>Database Schema Browsing</li>
        <li>Set up database connection with plain JDBC URL or TNS Names, also SSH tunnel supported</li>
        <li>Code Folding and bracket matching support</li>
        <li>Code commenting</li>
    </ul>
    <br>
    <b><font color="red">NOTE:</font> Put SQL and PL/SQL files under some of source roots to have them indexed by the plugin.</b>
    <br>
    Latest changes:
    <ul>
        <li>[KNOWN ISSUE] Case-sensitive table names, column names, etc are not supported for now</li>
        <li>[KNOWN ISSUE] Initial indexing of numerous SQL files (1k and more) may take time</li>
     </ul>
    <br>

    I appreciate comments, suggestions or bug reports, thanks in advance.
    </html>
    ]]></description>
    <version>1.5.8.133</version>
    <vendor email="plsql.assistant@gmail.com"
            logo="/general/ijLogo.png"
            url="https://github.com/deepsky/SQL-Code-Assistant-">Serhiy Kulyk</vendor>



    <change-notes><![CDATA[<html>
       <ul>
            <li><b>1.5.8.133</b>
                 <ul>
                    - [NEW] More support on completion: SELECT JOIN, etc<br>
                    - [NEW] Parsing RESULT_CACHE construction<br>
                    - [FIX] "member" can be a name of table/view<br>
                    - [FIX] Fix "Accessing invalid virtual file" issue<br>
                 </ul>
            </li>
            <li><b>1.5.6.13</b>
                 <ul>
                    - [NEW] Refactoring of completion (implemented base cases for now)<br>
                 </ul>
            </li>
            <li><b>1.4.9.13</b>
                 <ul>
                    - [NEW] Highlight errored string literals<br>
                    - [FIX] NPE in Structure View in case of invalid file<br>
                    - [FIX] Validation exception fixes<br>
                 </ul>
            </li>
            <li><b>1.4.8.12</b>
                 <ul>
                    - [NEW] Public Key authentication for SSH tunnel<br>
                    - [FIX] StringIndexOutOfBoundsException issue<br>
                    - [FIX] DB Connection Editor dialog<br>
                 </ul>
            </li>
            <li><b>1.4.7.12</b>
                 <ul>
                    - [FIX] GoToDBObject does not show objects with the same names<br>
                    - [FIX] Indexing of SQL files<br>
                    - [FIX] Data export to CSV format<br>
                    - [KNOWN ISSUE] Case-sensitive table names, column names and so on are not supported for now<br>
                 </ul>
            </li>
            <li><b>1.4.6.12</b>
                 <ul>
                    - [NEW] Added support for "Enter within comments"<br>
                    - [FIX] SQL and PL/SQL file indexing<br>
                    - [FIX] Some change in syntax highlighter to support Darcula color scheme<br>
                    - [FIX] Data export to CSV format<br>
                    - [FIX] Parser and formatter for REVOKE and GRANT statements<br>
                    - [KNOWN ISSUE] Case-sensitive table names, column names and so on are not supported for now<br>
                 </ul>
            </li>
            <li><b>1.4.5.12</b>
                 <ul>
                    - [NEW] Add support for RENAME TABLE statement, parsing, execution, code completion, etc<br>
                    - [FIX] Enhanced support for GRANT statement<br>
                    - [FIX] Performance improvement in the parser<br>
                    - [FIX] Code formatter changed case of names in double quotes<br>
                    - [KNOWN ISSUE] Case-sensitive table names, column names and so on are not supported for now<br>
                 </ul>
            </li>
            <li><b>1.4.4.12</b>
                 <ul>
                    - [NEW] Initial support for Materialized Views (parsing and highlighting)<br>
                    - [FIX] Some fixes in the parser<br>
                    - [FIX] Syntax highlighting is broken on empty file<br>
                    - [FIX] Enable parser to support DB links for %TYPE and %ROWTYPE<br>
                    - [FIX] Bring back lost icons for buttons in Connection Settings dialog<br>
                    - [KNOWN ISSUE] Case-sensitive table names, column names and so on are not supported for now<br>
                 </ul>
            </li>
            <li><b>1.4.2.12</b>
                 <ul>
                    - [KNOWN ISSUE] Case-sensitive table names, column names and so on are not supported for now<br>
                    - [NEW] Access to remote database via SSH (port forwarding)<br>
                    - [FIX] Refresh session button does not work<br>
                    - [FIX] Errored syntax failes syntax highlighting<br>
                    - [FIX] Slash failes parsing<br>
                 </ul>
            </li>
            <li><b>1.4.1.12</b>
                 <ul>
                    - [NEW] TNSNAMES.ORA files can be used to establish connection to a database<br>
                 </ul>
            </li>
            <li><b>1.4.0.12</b>
                 <ul>
                    - [NEW] Show Explain plan for SQL statement<br>
                    - [NEW] Support ALETR INDEX statement<br>
                    - [FIX] Hangs up on cancelation of running SQL<br>
                 </ul>
            </li>
            <li><b>1.3.1.12</b>
                 <ul>
                    - [FIX] Some fixes in the parser<br>
                 </ul>
            </li>
            <li><b>1.3.0.11</b>
                 <ul>
                    - [NEW] Added configuration of Colors & Fonts<br>
                    - [NEW] Autompletion of ":=", "||", SQL cursor attributes (PL/SQL), etc<br>
                    - [NEW] Support of the quoting mechanizm in PL/SQL appeared in 10g<br>
                 </ul>
            </li>
            <li><b>1.2.2.11</b>
                 <ul>
                    - [FIX] Allow hyphen character in DB host name, example: 'host-101.com'<br>
                    - [FIX] DatabaseBrowser is not properly updated on ALTER TABLE request<br>
                 </ul>
            </li>
            <li><b>1.2.1.11</b>
                 <ul>
                    - [FIX] Handling changes of File Type extensions<br>
                    - [FIX] Find Usages for names in double quotes<br>
                    - [FIX] Parsing<br>
                 </ul>
            </li>
            <li><b>1.2.0.11</b>
                 <ul>
                    - [NEW] Code formatter added<br>
                 </ul>
            </li>
        </ul>
    </html>]]></change-notes>
    <idea-version since-build="133.100" until-build="133.*"/>
    <depends>com.intellij.modules.lang</depends>
    <depends>com.intellij.modules.platform</depends>

    <extensions defaultExtensionNs="com.intellij">
<!--
        <errorHandler implementation="com.intellij.diagnostic.ITNReporter"/>
-->
        <lang.parserDefinition language="PlSql" implementationClass="com.deepsky.lang.common.PlSqlParserDefinition"/>

        <annotator language="PlSql" implementationClass="com.deepsky.lang.validation.SyntaxHighlightAnnotator"/>
        <syntaxHighlighter key="PlSql" implementationClass="com.deepsky.lang.plsql.highlighter.PlSqlHighlighterAnn"/>
        <!--<elementsToHighlightFilter  implementation="com.deepsky.lang.plsql.highlighter.PlSqlElementHighlightFilter"/>-->

        <lang.psiStructureViewFactory language="PlSql" implementationClass="com.deepsky.lang.common.PlSqlStructureViewFactory"/>
        <lang.foldingBuilder language="PlSql" implementationClass="com.deepsky.lang.plsql.folding.PlSqlCodeFoldingBuilder"/>
        <lang.commenter language="PlSql" implementationClass="com.deepsky.lang.common.PlSqlCommenter"/>
        <lang.braceMatcher language="PlSql" implementationClass="com.deepsky.lang.common.PlSqlBraceMatcher"/>
        <lang.documentationProvider language="PlSql" implementationClass="com.deepsky.lang.common.DocumentationProviderImpl"/>
        <lang.ast.factory language="PlSql" implementationClass="com.deepsky.lang.plsql.resolver.factory.SqlASTFactory"/>

        <colorSettingsPage implementation="com.deepsky.lang.plsql.highlighter.PlSqlColorsAndFontsPage"/>

        <referencesSearch implementation="com.deepsky.findUsages.FindUsagesProcessor"/>
        <usageTypeProvider implementation="com.deepsky.findUsages.SqlUsageTypeProvider"/>
        <!--<fileStructureGroupRuleProvider implementation="com.deepsky.findUsages.providers.PlSqlLevel0_FileStructureGroupRuleProvider"/>-->
        <!--<fileStructureGroupRuleProvider implementation="com.deepsky.findUsages.providers.PlSqlLevel1_FileStructureGroupRuleProvider"/>-->
        <!--<fileStructureGroupRuleProvider implementation="com.deepsky.findUsages.providers.SqlStmtFileStructureGroupRuleProvider"/>-->
        <!--<usageGroupingRuleProvider implementation="com.deepsky.findUsages.SqlUsageGroupingRuleProviderImpl"/>-->
        <scopeDescriptorProvider implementation="com.deepsky.findUsages.scopes.DbScopeDescriptorProvider"/>
        <readWriteAccessDetector implementation="com.deepsky.findUsages.providers.PlSqlReadWriteAccessDetector"/>

        <!--
                <enterHandlerDelegate implementation="com.deepsky.lang.plsql.formatter2.BeginEndEnterHandler"/>
        -->

        <lang.formatter language="PlSql" implementationClass="com.deepsky.lang.plsql.formatter.PlSqlFormattingModelBuilder"/>
        <postFormatProcessor implementation="com.deepsky.lang.plsql.formatter.PlSqlPostFormatProcessor"/>
        <codeStyleSettingsProvider implementation="com.deepsky.lang.plsql.formatter.settings.PlSqlCodeStyleSettingsProvider"/>
        <langCodeStyleSettingsProvider implementation="com.deepsky.lang.plsql.formatter.settings.PlSqlLanguageCodeStyleSettingsProvider"/>

        <definitionsSearch implementation="com.deepsky.navigation.ImplementationsSearcher"/>
        <targetElementEvaluator language="PlSql" implementationClass="com.deepsky.navigation.PlSqlTargetElementEvaluator"/>
        <fileIconProvider implementation="com.deepsky.lang.common.FileIconProviderImpl"/>

        <typedHandler implementation="com.deepsky.lang.plsql.editor.actions.PlSqlTypedHandler"/>
        <quoteHandler fileType="PlSql" className="com.deepsky.lang.plsql.editor.actions.PlSqlQuoteHandler"/>

        <completion.contributor language="PlSql" implementationClass="com.deepsky.lang.plsql.completion.MyCompletionContributor"/>
        <weigher key="completion" implementationClass="com.deepsky.lang.plsql.completion.SqlCompletionWeigher" id="plsqlWeigher" order="before stats" />

        <codeInsight.parameterInfo language="PlSql"
                                   implementationClass="com.deepsky.lang.plsql.paraminfo.DatatypeParameterInfoHandler"/>
        <codeInsight.parameterInfo language="PlSql"
                                   implementationClass="com.deepsky.lang.plsql.paraminfo.FunctionParameterInfoHandler"/>

        <lang.fileViewProviderFactory language="PlSql"
                                      implementationClass="com.deepsky.lang.plsql.providers.PlSqlFileViewProviderFactory"/>


        <projectConfigurable instance="com.deepsky.settings.PlSqlPluginSettingsManager"/>

        <fileTypeFactory implementation="com.deepsky.lang.common.PlSqlFileTypeLoader"/>

        <projectService serviceInterface="com.deepsky.findUsages.persistence.SqlSearchParameters"
                        serviceImplementation="com.deepsky.findUsages.persistence.SqlSearchParameters"/>

        <projectService serviceInterface="com.deepsky.settings.SqlCodeAssistantSettings"
                        serviceImplementation="com.deepsky.settings.SqlCodeAssistantSettings"/>

        <projectService serviceInterface="com.deepsky.lang.integration.CodeChangeEventAggregator"
                        serviceImplementation="com.deepsky.lang.integration.CodeChangeEventAggregator"/>

        <projectService serviceInterface="com.deepsky.view.query_pane.util.DateTimeParser"
                        serviceImplementation="com.deepsky.view.query_pane.util.DateTimeParser"/>

        <projectService serviceInterface="com.deepsky.actions.SqlScriptRunner"
                        serviceImplementation="com.deepsky.actions.SqlScriptRunService"/>
    </extensions>

    <project-components>
        <component>
            <implementation-class>com.deepsky.lang.common.PlSqlProjectComponent</implementation-class>
        </component>
        <!--
        <component>
          <implementation-class>com.intellij.lang.impl.CustomHighlighterPassFactory</implementation-class>
        </component>
        -->

        <component>
            <interface-class>com.deepsky.view.schema_pane.DbBrowserToolWindow</interface-class>
            <implementation-class>com.deepsky.view.schema_pane.tree.DbBrowserToolWindowComponent</implementation-class>
        </component>
    </project-components>

    <application-components>
        <component>
            <implementation-class>com.deepsky.lang.common.PlSqlSupportLoader</implementation-class>
        </component>
        <!--
                <component>
                    <implementation-class>com.deepsky.findUsages.converter.UsageConverter</implementation-class>
                </component>
        -->

    </application-components>

    <!-- Component's actions -->
    <actions>

        <group id="MainMenu.ActionGroup"
               text="S_QL Assistant" description="Sql Assistant Plugin">
            <action id="ActionsSample.ActionsPlugin.ExecSQL.1" class="com.deepsky.actions.ExecuteSQLStatementAction"
                    text="Execute SQL Statement" description="Execute SQL Statement"
                    icon="/icons/exec_sql_small.png">
                <keyboard-shortcut first-keystroke="control shift M" keymap="$default"/>
            </action>
            <action id="ActionsSample.ActionsPlugin.ExecSQL.2" class="com.deepsky.actions.ExplainPlanAction"
                    text="Explain Plan" description="Explain execution plan for selected SQL statement"
                    icon="/icons/exec_sql_small.png">
                <keyboard-shortcut first-keystroke="control shift P" keymap="$default"/>
            </action>
            <action id="com.deepsky.navigation.GotoDbObjectAction.1" class="com.deepsky.navigation.GotoDbObjectAction"
                    text="Goto Db Object" description="Search Database Object">
                <keyboard-shortcut keymap="$default" first-keystroke="ctrl shift O"/>
            </action>
            <action id="com.deepsky.navigation.showParameterInfo.1" class="com.deepsky.actions.ShowParameterInfoFake"
                    text="Parameter Info" description="Parameter Info">
                <keyboard-shortcut keymap="$default" first-keystroke="ctrl P"/>
            </action>
<!--
            <action id="com.deepsky.navigation.ImportData" class="com.deepsky.actions.ImportDataAction"
                    text="Import Data" description="Import Data from CSV file">
                <keyboard-shortcut keymap="$default" first-keystroke="ctrl shift I"/>
            </action>
-->
            <!--
                        <action id="com.deepsky.navigation.showParameterInfo.1" class="com.deepsky.actions.ShowParameterInfoFake"
                                text="Parameter Info" description="Parameter Info">
                            <keyboard-shortcut keymap="$default" first-keystroke="ctrl P"/>
                        </action>
            -->
            <add-to-group group-id="MainMenu" anchor="before" relative-to-action="HelpMenu"/>
        </group>

        <action id="SqlSpecificFindUsages"
                class="com.deepsky.findUsages.actions.SqlSpecificFindUsagesAction"
                text="Find Usages" description="Find Usages ...">
            <add-to-group group-id="EditorPopupMenu1" anchor="before" relative-to-action="AnalyzeMenu"/>
        </action>

        <!-- We use "PluginName.ComponentName.ActionName" notation for "id" to avoid conflicts -->
        <action id="ActionsSample.ActionsPlugin.ExecSQL" class="com.deepsky.actions.ExecuteSQLStatementAction"
                text="Execute SQL Statement" description="Execute SQL Statement"
                icon="/icons/exec_sql.png">
            <add-to-group group-id="MainToolBar" anchor="before" relative-to-action="HelpTopics"/>
            <keyboard-shortcut first-keystroke="control shift M" keymap="$default"/>
            <!--<keyboard-shortcut first-keystroke="ctrl B" keymap="$default"/>-->
        </action>

        <action id="com.deepsky.toolwindow.OpenResultPanelAction"
                class="com.deepsky.view.query_pane.OpenResultPanelAction"
                text="Open Result Panel" description="Open Query Result Panel">
            <add-to-group group-id="GoToMenu" anchor="last"/>
            <keyboard-shortcut keymap="$default" first-keystroke="alt 0"/>
        </action>

        <group id="Actions.ActionsPlugin.SampleGroup" text="Sample" description="Sample group">
            <!--<reference ref="ActionsSample.ActionsPlugin.ExecSQL"/>-->
            <separator/>
            <add-to-group group-id="MainToolBar" anchor="before" relative-to-action="HelpTopics"/>
        </group>

        <action id="SQLAssistant.ActionsPlugin.ExecSQL" class="com.deepsky.actions.ExecuteSQLStatementAction"
                text="Execute SQL Statement" description="Execute SQL Statement"
                icon="/icons/exec_sql_small.png">
            <keyboard-shortcut first-keystroke="control shift M" keymap="$default"/>
        </action>

        <action id="SQLAssistant.ActionsPlugin.FindUsages"
                class="com.deepsky.findUsages.actions.FindUsageStructureViewPopupAction"
                text="Find Usages" description="Find Usages ..." icon="/icons/find.png">
        </action>


        <group id="SQLAssistantSV" popup="true" text="SQL Assistant">
            <reference ref="SQLAssistant.ActionsPlugin.ExecSQL"/>
            <reference ref="SQLAssistant.ActionsPlugin.FindUsages"/>
            <!--<add-to-group anchor="last" group-id="ProjectViewPopupMenu"/>-->
            <add-to-group anchor="first" group-id="StructureViewPopupMenu"/>
        </group>

        <!--
                <group id="StructureView.ActionGroup"
                       text="SQL Assistant" description="Sql Assistant Plugin">
                    <action id="ActionsSample.ActionsPlugin.ExecSQL.2" class="com.deepsky.actions.ExecuteSQLStatementAction"
                            text="Execute SQL Statement" description="Execute SQL Statement"
                            icon="/icons/exec_sql_small.png">
                        <keyboard-shortcut first-keystroke="control shift M" keymap="$default"/>
                    </action>
                    <action id="com.deepsky.navigation.GotoDbObjectAction.2" class="com.deepsky.navigation.GotoDbObjectAction"
                            text="Goto Db Object" description="Search Database Object">
                        <keyboard-shortcut keymap="$default" first-keystroke="ctrl shift O"/>
                    </action>
                    <action id="com.deepsky.navigation.showParameterInfo.2" class="com.deepsky.actions.ShowParameterInfoFake"
                            text="Parameter Info" description="Parameter Info">
                        <keyboard-shortcut keymap="$default" first-keystroke="ctrl P"/>
                    </action>
                    <add-to-group group-id="StructureViewPopupMenu" anchor="first"/>
                </group>
        -->

    </actions>

    <helpset file="help.jar" path="/helpset.hs"/>


</idea-plugin>
