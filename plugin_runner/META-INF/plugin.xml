<!DOCTYPE idea-plugin PUBLIC "Plugin/DTD" "http://plugins.intellij.net/plugin.dtd">
<idea-plugin version="2" url="https://github.com/deepsky/SQL-Code-Assistant-/wiki">
    <name>SQL Code Assistant</name>
    <id>SQL</id>
    <description><![CDATA[
    <html>
    SQL Code Assistant provides extended editing capability for SQL and PL/SQL code of the Oracle database.<br>
    With the SQL Code Assistant you are able to browse the objects, edit and execute SQL statements, navigate
    over the code, search for usages in the database schema or scripts on the File System.<br><br>

    The plugin uses lexer and parser generated by ANTLR tool, thanks to Terence Parr (parrt@cs.usfca.edu, parrt@antlr.org).
    <br><br>
    Feature list:
    <ul>
        <li>Configurable syntax and error highlighting</li>
        <li>Static code analysis</li>
        <li>Context aware code completion</li>
        <li>Viewing the structure of SQL and PL/SQL code</li>
        <li>SQL and PL/SQL code formatting (experimental) <b>(Ctrl-Alt-L)</b></li>
        <li>Code Navigation</li>
        <li>Quick object lookup <b>(Ctrl-Shift-O)</b></li>
        <li>Explain Plan <b>(Ctrl-Shift-P)</b></li>
        <li>Find Usages tables, views, columns, function, procedures, etc</li>
        <li>Run SQL statement or PL/SQL block against active connection <b>(Ctrl-Shift-M)</b></li>
        <li>Database Schema Browsing</li>
        <li>Set up database connection with plain JDBC URL or TNS Names, also SSH tunnel supported</li>
        <li>Code Folding and bracket matching support</li>
        <li>Code commenting</li>
    </ul>
    <br>
    <b><font color="red">NOTE:</font> Put SQL and PL/SQL files under some of source roots to have them indexed by the plugin.</b>
    <br>
    <br>
    The latest changes:
    <ul>
        <li>Support completion for ALTER TABLE statement</li>
        <li>[KNOWN ISSUE] Case-sensitive table names, column names, etc are not supported for now</li>
        <li>[KNOWN ISSUE] Initial indexing of numerous SQL files (1k and more) may take time</li>
     </ul>
    <br>
    Version 1.5.12.129<br><br>

    I appreciate comments, suggestions or bug reports, thanks in advance.
    </html>
    ]]></description>
    <version>1.5.12.129</version>
    <vendor email="plsql.assistant@gmail.com"
            logo="/general/ijLogo.png"
            url="https://github.com/deepsky/SQL-Code-Assistant-">Serhiy Kulyk</vendor>


    <change-notes/>
    <idea-version since-build="120.1" until-build="129.1999"/>
    <depends>com.intellij.modules.lang</depends>
    <depends>com.intellij.modules.platform</depends>

    <extensions defaultExtensionNs="com.intellij">
<!--
        <errorHandler implementation="com.intellij.diagnostic.ITNReporter"/>
-->
        <lang.parserDefinition language="PlSql" implementationClass="com.deepsky.lang.common.PlSqlParserDefinition"/>

        <annotator language="PlSql" implementationClass="com.deepsky.lang.validation.SyntaxHighlightAnnotator"/>
        <syntaxHighlighter key="PlSql" implementationClass="com.deepsky.lang.plsql.highlighter.PlSqlHighlighterAnn"/>
        <elementsToHighlightFilter  implementation="com.deepsky.lang.plsql.highlighter.PlSqlElementHighlightFilter"/>

        <lang.psiStructureViewFactory language="PlSql" implementationClass="com.deepsky.lang.common.PlSqlStructureViewFactory"/>
        <lang.foldingBuilder language="PlSql" implementationClass="com.deepsky.lang.plsql.folding.PlSqlCodeFoldingBuilder"/>
        <lang.commenter language="PlSql" implementationClass="com.deepsky.lang.common.PlSqlCommenter"/>
        <lang.braceMatcher language="PlSql" implementationClass="com.deepsky.lang.common.PlSqlBraceMatcher"/>
        <lang.documentationProvider language="PlSql" implementationClass="com.deepsky.lang.common.DocumentationProviderImpl"/>
        <lang.ast.factory language="PlSql" implementationClass="com.deepsky.lang.plsql.resolver.factory.SqlASTFactory"/>

        <colorSettingsPage implementation="com.deepsky.lang.plsql.highlighter.PlSqlColorsAndFontsPage"/>

        <referencesSearch implementation="com.deepsky.findUsages.FindUsagesProcessor"/>
        <usageTypeProvider implementation="com.deepsky.findUsages.SqlUsageTypeProvider"/>
        <!--<fileStructureGroupRuleProvider implementation="com.deepsky.findUsages.providers.PlSqlLevel0_FileStructureGroupRuleProvider"/>-->
        <!--<fileStructureGroupRuleProvider implementation="com.deepsky.findUsages.providers.PlSqlLevel1_FileStructureGroupRuleProvider"/>-->
        <!--<fileStructureGroupRuleProvider implementation="com.deepsky.findUsages.providers.SqlStmtFileStructureGroupRuleProvider"/>-->
        <!--<usageGroupingRuleProvider implementation="com.deepsky.findUsages.SqlUsageGroupingRuleProviderImpl"/>-->
        <scopeDescriptorProvider implementation="com.deepsky.findUsages.scopes.DbScopeDescriptorProvider"/>
        <readWriteAccessDetector implementation="com.deepsky.findUsages.providers.PlSqlReadWriteAccessDetector"/>

        <!--
                <enterHandlerDelegate implementation="com.deepsky.lang.plsql.formatter2.BeginEndEnterHandler"/>
        -->

        <lang.formatter language="PlSql" implementationClass="com.deepsky.lang.plsql.formatter.PlSqlFormattingModelBuilder"/>
        <postFormatProcessor implementation="com.deepsky.lang.plsql.formatter.PlSqlPostFormatProcessor"/>
        <codeStyleSettingsProvider implementation="com.deepsky.lang.plsql.formatter.settings.PlSqlCodeStyleSettingsProvider"/>
        <langCodeStyleSettingsProvider implementation="com.deepsky.lang.plsql.formatter.settings.PlSqlLanguageCodeStyleSettingsProvider"/>

        <definitionsSearch implementation="com.deepsky.navigation.ImplementationsSearcher"/>
        <targetElementEvaluator language="PlSql" implementationClass="com.deepsky.navigation.PlSqlTargetElementEvaluator"/>
        <fileIconProvider implementation="com.deepsky.lang.common.FileIconProviderImpl"/>

        <typedHandler implementation="com.deepsky.lang.plsql.editor.actions.PlSqlTypedHandler"/>
        <quoteHandler fileType="PlSql" className="com.deepsky.lang.plsql.editor.actions.PlSqlQuoteHandler"/>

        <completion.contributor language="PlSql" implementationClass="com.deepsky.lang.plsql.completion.MyCompletionContributor"/>
        <completion.confidence language="PlSql" implementationClass="com.intellij.codeInsight.completion.AlwaysFocusLookup"/>
        <weigher key="completion" implementationClass="com.deepsky.lang.plsql.completion.SqlCompletionWeigher" id="plsqlWeigher" order="before stats" />

        <codeInsight.parameterInfo language="PlSql"
                                   implementationClass="com.deepsky.lang.plsql.paraminfo.DatatypeParameterInfoHandler"/>
        <codeInsight.parameterInfo language="PlSql"
                                   implementationClass="com.deepsky.lang.plsql.paraminfo.FunctionParameterInfoHandler"/>

        <lang.fileViewProviderFactory language="PlSql"
                                      implementationClass="com.deepsky.lang.plsql.providers.PlSqlFileViewProviderFactory"/>


        <projectConfigurable instance="com.deepsky.settings.PlSqlPluginSettingsManager"/>

        <fileTypeFactory implementation="com.deepsky.lang.common.PlSqlFileTypeLoader"/>

        <projectService serviceInterface="com.deepsky.findUsages.persistence.SqlSearchParameters"
                        serviceImplementation="com.deepsky.findUsages.persistence.SqlSearchParameters"/>

        <projectService serviceInterface="com.deepsky.settings.SqlCodeAssistantSettings"
                        serviceImplementation="com.deepsky.settings.SqlCodeAssistantSettings"/>

        <projectService serviceInterface="com.deepsky.lang.integration.CodeChangeEventAggregator"
                        serviceImplementation="com.deepsky.lang.integration.CodeChangeEventAggregator"/>

        <projectService serviceInterface="com.deepsky.view.query_pane.util.DateTimeParser"
                        serviceImplementation="com.deepsky.view.query_pane.util.DateTimeParser"/>

        <projectService serviceInterface="com.deepsky.actions.SqlScriptRunner"
                        serviceImplementation="com.deepsky.actions.SqlScriptRunService"/>
    </extensions>

    <project-components>
        <component>
            <implementation-class>com.deepsky.lang.common.PlSqlProjectComponent</implementation-class>
        </component>
        <!--
        <component>
          <implementation-class>com.intellij.lang.impl.CustomHighlighterPassFactory</implementation-class>
        </component>
        -->

        <component>
            <interface-class>com.deepsky.view.schema_pane.DbBrowserToolWindow</interface-class>
            <implementation-class>com.deepsky.view.schema_pane.tree.DbBrowserToolWindowComponent</implementation-class>
        </component>
    </project-components>

    <application-components>
        <component>
            <implementation-class>com.deepsky.lang.common.PlSqlSupportLoader</implementation-class>
        </component>
        <!--
                <component>
                    <implementation-class>com.deepsky.findUsages.converter.UsageConverter</implementation-class>
                </component>
        -->

    </application-components>

    <!-- Component's actions -->
    <actions>

        <group id="MainMenu.ActionGroup"
               text="S_QL Assistant" description="Sql Assistant Plugin">
            <action id="ActionsSample.ActionsPlugin.ExecSQL.1" class="com.deepsky.actions.ExecuteSQLStatementAction"
                    text="Execute SQL Statement" description="Execute SQL Statement"
                    icon="/icons/exec_sql_small.png">
                <keyboard-shortcut first-keystroke="control shift M" keymap="$default"/>
            </action>
            <action id="ActionsSample.ActionsPlugin.ExecSQL.2" class="com.deepsky.actions.ExplainPlanAction"
                    text="Explain Plan" description="Explain execution plan for selected SQL statement"
                    icon="/icons/exec_sql_small.png">
                <keyboard-shortcut first-keystroke="control shift P" keymap="$default"/>
            </action>
            <action id="com.deepsky.navigation.GotoDbObjectAction.1" class="com.deepsky.navigation.GotoDbObjectAction"
                    text="Goto Db Object" description="Search Database Object">
                <keyboard-shortcut keymap="$default" first-keystroke="ctrl shift O"/>
            </action>
            <action id="com.deepsky.navigation.showParameterInfo.1" class="com.deepsky.actions.ShowParameterInfoFake"
                    text="Parameter Info" description="Parameter Info">
                <keyboard-shortcut keymap="$default" first-keystroke="ctrl P"/>
            </action>
<!--
            <action id="com.deepsky.navigation.ImportData" class="com.deepsky.actions.ImportDataAction"
                    text="Import Data" description="Import Data from CSV file">
                <keyboard-shortcut keymap="$default" first-keystroke="ctrl shift I"/>
            </action>
-->
            <!--
                        <action id="com.deepsky.navigation.showParameterInfo.1" class="com.deepsky.actions.ShowParameterInfoFake"
                                text="Parameter Info" description="Parameter Info">
                            <keyboard-shortcut keymap="$default" first-keystroke="ctrl P"/>
                        </action>
            -->
            <add-to-group group-id="MainMenu" anchor="before" relative-to-action="HelpMenu"/>
        </group>

        <action id="SqlSpecificFindUsages"
                class="com.deepsky.findUsages.actions.SqlSpecificFindUsagesAction"
                text="Find Usages" description="Find Usages ...">
            <add-to-group group-id="EditorPopupMenu1" anchor="before" relative-to-action="AnalyzeMenu"/>
        </action>

        <!-- We use "PluginName.ComponentName.ActionName" notation for "id" to avoid conflicts -->
        <action id="ActionsSample.ActionsPlugin.ExecSQL" class="com.deepsky.actions.ExecuteSQLStatementAction"
                text="Execute SQL Statement" description="Execute SQL Statement"
                icon="/icons/exec_sql.png">
            <add-to-group group-id="MainToolBar" anchor="before" relative-to-action="HelpTopics"/>
            <keyboard-shortcut first-keystroke="control shift M" keymap="$default"/>
            <!--<keyboard-shortcut first-keystroke="ctrl B" keymap="$default"/>-->
        </action>

        <action id="com.deepsky.toolwindow.OpenResultPanelAction"
                class="com.deepsky.view.query_pane.OpenResultPanelAction"
                text="Open Result Panel" description="Open Query Result Panel">
            <add-to-group group-id="GoToMenu" anchor="last"/>
            <keyboard-shortcut keymap="$default" first-keystroke="alt 0"/>
        </action>

        <group id="Actions.ActionsPlugin.SampleGroup" text="Sample" description="Sample group">
            <!--<reference ref="ActionsSample.ActionsPlugin.ExecSQL"/>-->
            <separator/>
            <add-to-group group-id="MainToolBar" anchor="before" relative-to-action="HelpTopics"/>
        </group>

        <action id="SQLAssistant.ActionsPlugin.ExecSQL" class="com.deepsky.actions.ExecuteSQLStatementAction"
                text="Execute SQL Statement" description="Execute SQL Statement"
                icon="/icons/exec_sql_small.png">
            <keyboard-shortcut first-keystroke="control shift M" keymap="$default"/>
        </action>

        <action id="SQLAssistant.ActionsPlugin.FindUsages"
                class="com.deepsky.findUsages.actions.FindUsageStructureViewPopupAction"
                text="Find Usages" description="Find Usages ..." icon="/icons/find.png">
        </action>


        <group id="SQLAssistantSV" popup="true" text="SQL Assistant">
            <reference ref="SQLAssistant.ActionsPlugin.ExecSQL"/>
            <reference ref="SQLAssistant.ActionsPlugin.FindUsages"/>
            <!--<add-to-group anchor="last" group-id="ProjectViewPopupMenu"/>-->
            <add-to-group anchor="first" group-id="StructureViewPopupMenu"/>
        </group>

        <!--
                <group id="StructureView.ActionGroup"
                       text="SQL Assistant" description="Sql Assistant Plugin">
                    <action id="ActionsSample.ActionsPlugin.ExecSQL.2" class="com.deepsky.actions.ExecuteSQLStatementAction"
                            text="Execute SQL Statement" description="Execute SQL Statement"
                            icon="/icons/exec_sql_small.png">
                        <keyboard-shortcut first-keystroke="control shift M" keymap="$default"/>
                    </action>
                    <action id="com.deepsky.navigation.GotoDbObjectAction.2" class="com.deepsky.navigation.GotoDbObjectAction"
                            text="Goto Db Object" description="Search Database Object">
                        <keyboard-shortcut keymap="$default" first-keystroke="ctrl shift O"/>
                    </action>
                    <action id="com.deepsky.navigation.showParameterInfo.2" class="com.deepsky.actions.ShowParameterInfoFake"
                            text="Parameter Info" description="Parameter Info">
                        <keyboard-shortcut keymap="$default" first-keystroke="ctrl P"/>
                    </action>
                    <add-to-group group-id="StructureViewPopupMenu" anchor="first"/>
                </group>
        -->

    </actions>

    <helpset file="help.jar" path="/helpset.hs"/>


</idea-plugin>
